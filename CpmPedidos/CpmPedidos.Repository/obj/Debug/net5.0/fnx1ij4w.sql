CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);

START TRANSACTION;

CREATE TABLE tb_cidade (
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    nome character varying(100) NOT NULL,
    uf character varying(2) NOT NULL,
    ativo boolean NOT NULL,
    criado_em timestamp without time zone NOT NULL,
    CONSTRAINT "PK_tb_cidade" PRIMARY KEY (id)
);

CREATE TABLE tb_endereco (
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    tipo smallint NOT NULL,
    logradouro character varying(50) NOT NULL,
    bairro character varying(50) NOT NULL,
    numero character varying(10) NULL,
    complemento character varying(50) NULL,
    cep character varying(8) NULL,
    id_cidade integer NOT NULL,
    criado_em timestamp without time zone NOT NULL,
    CONSTRAINT "PK_tb_endereco" PRIMARY KEY (id),
    CONSTRAINT "FK_tb_endereco_tb_cidade_id_cidade" FOREIGN KEY (id_cidade) REFERENCES tb_cidade (id) ON DELETE CASCADE
);

CREATE INDEX "IX_tb_endereco_id_cidade" ON tb_endereco (id_cidade);

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20210415195654_Init', '5.0.5');

COMMIT;

